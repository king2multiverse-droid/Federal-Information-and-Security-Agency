<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FISA Secured Terminal</title>

<style>
#logo-container {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  pointer-events: none;
}

#logo {
  max-width: 300px;
  max-height: 250px;
  width: auto;
  height: auto;
}

body {
  margin: 0;
  background: black;
  font-family: "Courier New", monospace;
}

#terminal {
  color: #885ab8;
  padding: 20px;
  font-size: 16px;
  opacity: 0.95;
  filter: blur(0.2px);
  text-shadow:
    0 0 1px rgba(255,204,136,0.4),
    0 0 4px rgba(255,204,136,0.25),
    0 0 10px rgba(255,204,136,0.15);
  animation: jitter 0.15s infinite alternate;
}

#terminal::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.2),
    rgba(0,0,0,0.2) 1px,
    transparent 1px,
    transparent 3px
  );
}

@keyframes jitter {
  0% { transform: translateY(0); }
  50% { transform: translateY(0.3px); }
}
</style>
</head>

<body>

<div id="logo-container">
  <img src="FISA.png" alt="FISA Logo" id="logo">
</div>

<div id="terminal">
  <pre id="output"></pre>
  <span>&gt; </span><span id="input"></span>
</div>

<audio id="ambientAudio" loop preload="auto">
  <source src="LEMMiNO - Blackout (BGM).mp3" type="audio/mpeg">
</audio>

<script>
/* =========================
   CORE STATE
========================= */
let buffer = "";
let loggedIn = false;
let terminalUnlocked = false;
let mode = "LOGIN";

/* =========================
   ELEMENTS
========================= */
const output = document.getElementById("output");
const input  = document.getElementById("input");
const audio  = document.getElementById("ambientAudio");

const SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbyJDDsj4Ow8o-sbN3mPIb2sPn76ubIe-rNvKMZoEhBric-yId1yGHDQKThvXelrZag/exec";

/* =========================
   AUDIO
========================= */
let audioStarted = false;

function startAmbientAudio() {
  if (audioStarted) return;
  audio.volume = 0;
  audio.play().then(() => {
    let level = 0;
    const fadeIn = setInterval(() => {
      level += 0.01;
      audio.volume = Math.min(level, 0.18);
      if (level >= 0.18) clearInterval(fadeIn);
    }, 200);
  }).catch(() => {});
  audioStarted = true;
}

/* =========================
   TERMINAL OUTPUT
========================= */
function print(text = "") {
  output.textContent += text + "\n";
  output.scrollTop = output.scrollHeight;
}

function clearScreen() {
  output.textContent = "";
}

/* =========================
   MAIN MENU
========================= */
function showMainMenu() {
  mode = "MAIN_MENU";
  print("");
  print("SECTOR REVIEW TERMINAL");
  print("SELECT SECTOR:");
  print("");
  print("1] FEDERAL DISCIPLINARY COUNCIL");
  print("2] FEDERATION OPERATIONS");
  print("3] PROJECT 'IRON'");
  print("4] FEDERAL AGENT INFORMATION");
  print("5] JOINT RECORDS TERMINAL");
  print("6] GOVERNMENT RECORDS");
  print("7] THE EYE");
  print("");
  print("ENTER SECTOR NUMBER:");
}

/* =========================
   FEDERAL DISCIPLINARY COUNCIL
========================= */
function showFederalDisciplinaryCouncil() {
  clearScreen();
  mode = "FEDERAL_DISCIPLINARY_COUNCIL";
  print("FEDERAL DISCIPLINARY COMMITTEE");
  print("=================");
  print(`
MANDATE: Includes 2 sections, FISA Disciplinary Commitee, and
Government Security Division of Justice. Members are granted
seats based on rank and actions conducted by individuals.
`);
}

/* =========================
   FEDERAL AGENT INFORMATION
========================= */
function showFederalAgentInformation() {
  clearScreen();
  mode = "AGENT_INFO";
  print("FEDERAL AGENT INFORMATION");
  print("=========================");
  print("");
  print("DEVELOPER [A0 ACCESS];");
  print('Federal Section Officer - "KingMultiverse";');
}

/* =========================
   FEDERATION OPERATIONS
========================= */
function showFederationOperations() {
  clearScreen();
  mode = "FED_OPS";
  print("FEDERATION OPERATIONS");
  print("----------------------");
  print("");
  print("A] INTEGRITY AND ASSURANCE DIRECTORATE");
  print("B] ENFORCEMENT AND SECURITY DIRECTORATE");
  print("C] TRAINING AND EDUCATION DIRECTORATE");
  print("D] INTERNAL SURVEILLANCE AND COMMUNICATIONS CHANNEL");
  print("");
  print("SELECT OPTION OR TYPE 'MENU' TO RETURN:");
}

function showFedOpsSection(letter) {
  clearScreen();
  print("ACCESSING DIRECTORATE...");
  print("");
  print("STATUS: OPERATIONAL");
  print("");
  print("TYPE 'MENU' TO RETURN.");
}

/* =========================
   INITIAL NOTICE
========================= */
print(`
************************************************************
*                  FEDERAL SECURITY NOTICE                 *
************************************************************

THIS TERMINAL IS THE PROPERTY OF A FEDERAL AUTHORITY.

UNAUTHORIZED ACCESS OR USE IS STRICTLY PROHIBITED.

ALL ACTIVITIES PERFORMED ON THIS SYSTEM ARE:
- MONITORED
- RECORDED
- SUBJECT TO REVIEW BY SECURITY OFFICERS

ACCESS IS RESTRICTED TO PERSONNEL WITH VALID CLEARANCE.

ENTER AUTHORIZATION CODE TO CONTINUE.
`);

/* =========================
   AUTH RESULT HANDLING
========================= */
const authResult = new URLSearchParams(location.search).get("auth");

if (authResult === "OK") {
  loggedIn = true;
  terminalUnlocked = true;
  clearScreen();
  print("SECURITY TOKEN VERIFIED");
  print("WELCOME, FEDERAL AGENT.");
  showMainMenu();
}

/* =========================
   INPUT HANDLER
========================= */
document.addEventListener("keydown", e => {
  startAmbientAudio();

  if (e.key === "Enter") {
    const cmd = buffer.trim().toUpperCase();
    print("> " + buffer);

    buffer = "";
    input.textContent = "";

    if (!loggedIn) {
      window.location.href =
        SCRIPT_URL + "?token=" + encodeURIComponent(cmd);
      return;
    }

    if (cmd === "MENU") {
      clearScreen();
      showMainMenu();
      return;
    }

    if (mode === "MAIN_MENU") {
      switch (cmd) {
        case "1": showFederalDisciplinaryCouncil(); return;
        case "2": showFederationOperations(); return;
        case "4": showFederalAgentInformation(); return;
        default:
          print("UNRECOGNIZED SECTOR");
          return;
      }
    }

    if (mode === "FED_OPS" && /^[A-D]$/.test(cmd)) {
      showFedOpsSection(cmd);
      return;
    }

    print("UNRECOGNIZED COMMAND");
    return;
  }

  if (e.key === "Backspace") {
    buffer = buffer.slice(0, -1);
    input.textContent = buffer;
    return;
  }

  if (e.key.length === 1) {
    buffer += e.key.toUpperCase();
    input.textContent = buffer;
  }
});
</script>

<script>
const SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbyJDDsj4Ow8o-sbN3mPIb2sPn76ubIe-rNvKMZoEhBric-yId1yGHDQKThvXelrZag/exec";

const token = new URLSearchParams(location.search).get("token");
console.log("TOKEN:", token);

fetch(SCRIPT_URL + "?token=" + encodeURIComponent(cmd))
  .then(r => r.json())
  .then(res => {
    if (!res.ok) {
      print("ACCESS DENIED");
      return;
    }

    // SUCCESS â€” redirect-based auth OR local unlock
    window.location.href =
      SCRIPT_URL + "?token=" + encodeURIComponent(cmd);
  })
  .catch(() => {
    print("SECURITY VALIDATION FAILED");
  });
</script>
</body>
</html>








