<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FISA Secured Terminal</title>

<style>
#logo-container {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  pointer-events: none;
}

#logo {
  max-width: 300px;
  max-height: 250px;
  width: auto;
  height: auto;
}

body {
  margin: 0;
  background: black;
  font-family: "Courier New", monospace;
}

#terminal {
  color: #885ab8;
  padding: 20px;
  font-size: 16px;
  opacity: 0.95;
  filter: blur(0.2px);
  text-shadow:
    0 0 1px rgba(255,204,136,0.4),
    0 0 4px rgba(255,204,136,0.25),
    0 0 10px rgba(255,204,136,0.15);
  animation: jitter 0.15s infinite alternate;
}

#terminal::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.2),
    rgba(0,0,0,0.2) 1px,
    transparent 1px,
    transparent 3px
  );
}

@keyframes jitter {
  0% { transform: translateY(0); }
  50% { transform: translateY(0.3px); }
}
</style>
</head>

<body>

<div id="logo-container">
  <img src="FISA.png" alt="FISA Logo" id="logo">
</div>

<div id="terminal">
  <pre id="output"></pre>
  <span>&gt; </span><span id="input"></span>
</div>

<audio id="ambientAudio" loop preload="auto">
  <source src="LEMMiNO - Blackout (BGM).mp3" type="audio/mpeg">
</audio>

<script>
  let terminalUnlocked = false;
  
  function unlockTerminal() {
  terminalUnlocked = true;
  clearScreen();
  print("SECURITY TOKEN VERIFIED, WELCOME FEDERAL AGENT.");
  print("ACCESS GRANTED, DUTY AND VIGILANCE BEFORE ALL.");
  print("");
}

function denyAccess() {
  terminalUnlocked = false;
  clearScreen();
  print("SECURITY TOKEN INVALID, CEASE VIEWING CLASSIFIED MATERIAL");
  print("ACCESS TERMINATED, COMMISSARIAT NOTIFIED.");
}

const audio = document.getElementById("ambientAudio");
let audioStarted = false;

function startAmbientAudio() {
  if (audioStarted) return;
  audio.volume = 0;
  audio.play().then(() => {
    let level = 0;
    const fadeIn = setInterval(() => {
      level += 0.01;
      audio.volume = Math.min(level, 0.18);
      if (level >= 0.18) clearInterval(fadeIn);
    }, 200);
  }).catch(() => {});
  audioStarted = true;
}

const output = document.getElementById("output");
const input  = document.getElementById("input");

const ACCESS_CODE = "FSS-1957";

let buffer = "";
let loggedIn = false;
let mode = "LOGIN"; // LOGIN | MAIN_MENU | FED_OPS | IAD_MENU | AGENT_INFO

function print(text = "") {
  output.textContent += text + "\n";
  output.scrollTop = output.scrollHeight;
}

function clearScreen() {
  output.textContent = "";
}

/* =========================
   MAIN MENU
========================= */
function showMainMenu() {
  mode = "MAIN_MENU";
  print("");
  print("SECTOR REVIEW TERMINAL");
  print("SELECT SECTOR:");
  print("");
  print("1] FEDERAL DISCIPLINARY COUNCIL");
  print("2] FEDERATION OPERATIONS");
  print("3] PROJECT 'IRON'");
  print("4] FEDERAL AGENT INFORMATION");
  print("5] JOINT RECORDS TERMINAL");
  print("6] GOVERNMENT RECORDS");
  print("7] THE EYE");
  print("");
  print("ENTER SECTOR NUMBER:");
}

/* =========================
FEDERAL DISCIPLINARY COMMITTEE
   ========================= */
function showFederalDisciplinaryCouncil() {
  clearScreen();
  mode = "FEDERAL_DISCIPLINARY_COUNCIL";
  print("FEDERAL DISCIPLINARY COMMITTEE");
  print("=================");
  print(`
  MANDATE: Includes 2 sections, FISA Disciplinary Commitee, and
  Government Security Division of Justice. Members are granted
  seats based on rank and actions conducted by individuals.

  SECURITY DIVISION MEMBERS INCLUDE:
  MINISTER OF INTERNAL AFFAIRS, ImForeverBlue.
  DEPUTY MINISTER OF INTERNAL AFFAIRS, [DATA EXPULGED].
  DIRECTOR-GENERAL OF FISA, Shaheer1973.
  DEPUTY DIRECTOR-GENERAL OF FISA, HTC_TheMarshal.

  FISA DISCIPLINARY MEMBERS INCLUDE:
  DIRECTOR OF IAD, Clairsii.
  DIRECTOR OF ESD, [DATA EXPULGED].
  DIRECTOR OF TED, Sky_Monkey.

  ADVISORY MEMBERS INCLUDE:
  Federal Section Officer, KingMultiverse_DVD.
  `);
}
  
/* =========================
  FEDERAL AGENT INFORMATION
  ========================== */
function showFederalAgentInformation() {
    clearScreen();
    mode = "AGENT_INFO";
    print("FEDERAL AGENT INFORMATION");
    print("=========================");
    print("");
    print("DEVELOPER [A0 ACCESS];");
    print('Federal Section Officer - "KingMultiverse";');
    print("");
    print("DIRECTORATE / HIGH COMMAND [A1 ACCESS];");
    print('ACT. DIRECTOR-GENERAL "HTC_MARSHAL";');
    print("");
    print(" TO BE ADDED ");
}
/* =========================
   FEDERATION OPERATIONS
========================= */
function showFederationOperations() {
  clearScreen();
  mode = "FED_OPS";
  print("FEDERATION OPERATIONS");
  print("----------------------");
  print("");
  print("A] INTEGRITY AND ASSURANCE DIRECTORATE");
  print("B] ENFORCEMENT AND SECURITY DIRECTORATE");
  print("C] TRAINING AND EDUCATION DIRECTORATE");
  print("D] INTERNAL SURVEILLANCE AND COMMUNICATIONS CHANNEL");
  print("   [RESTRICTED TO A1+]");
  print("");
  print("SELECT OPTION OR TYPE 'MENU' TO RETURN:");
}

/* =========================
   FED OPS SECTIONS
========================= */
function showFedOpsSection(letter) {
  clearScreen();
  print("ACCESSING DIRECTORATE...");
  print("");

  switch (letter) {

    case "A":
      mode = "IAD_MENU";
      print("INTEGRITY AND ASSURANCE DIRECTORATE");
      print("-----------------------------------");
      print(`
MANDATE:
The Integrity and Assurance Directorate (IAD) is charged with the verification,
assessment, and maintenance of personnel integrity across all federal bodies.

RESPONSIBILITIES INCLUDE:
- Background investigations across multiple clearance tiers
- Maintenance of disciplinary records and enforcement logs
- Oversight of compliance with federal statutes and internal directives

ACCESS CONTROL:
Personnel assigned to this directorate operate under Clearance Level 4 or higher.
Identities, methodologies, and internal findings are classified and exempt from
civilian disclosure under applicable federal secrecy provisions.
`);
      print("-----------------------------------");
      print("AUTHORIZED ACTIONS:");
      print("1] CONDUCT A RECORDS REQUEST");
      print("2] CONDUCT A STANDARD BACKGROUND ANALYSIS");
      print("3] CONDUCT A COMPREHENSIVE SCREENING ASSESSMENT");
      print("");
      print("TYPE 'MENU' TO RETURN.");
      break;

    case "B":
      print("ENFORCEMENT AND SECURITY DIRECTORATE");
      print("-----------------------------------");
      print(`
ENFORCEMENT AND SECURITY DIRECTORATE
-----------------------------------

MANDATE:
The Enforcement and Security Directorate (ESD) serves as the primary operational
and disciplinary authority within the Federal Government.

RESPONSIBILITIES INCLUDE:
- Execution of large-scale federal operations and investigations
- Enforcement of internal regulations and ministerial oversight
- Coordination of high-risk compliance and response actions

AUTHORITY:
Personnel assigned to ESD are granted expanded statutory powers necessary for
the fulfillment of enforcement duties. Specialized training in interrogation,
containment, and enforcement methodologies is conducted in cooperation with
[REDACTED] and [REDACTED], in accordance with classified training protocols.
`);
      print("-----------------------------------");
      print("STATUS: OPERATIONAL");
      print("");
      print("TYPE 'MENU' TO RETURN.");
      break;

    case "C":
      print("TRAINING AND EDUCATION DIRECTORATE");
      print("-----------------------------------");
      print(`
MANDATE:
The Training and Education Directorate (TED) oversees the recruitment,
evaluation, and conditioning of federal personnel designated for operational
service.

NOTICE:
Access to this directorate indicates provisional acceptance into a restricted
federal training program. Selection follows an extensive screening and
vetting process and does not constitute confirmation of permanent status.

PROGRAM DETAILS:
Accepted candidates undergo structured instruction in federal doctrine,
operational conduct, and classified procedures. Training activities are
conducted in coordination with [REDACTED] and [REDACTED].

All participation is subject to continuous review.
`);
      print("-----------------------------------");
      print("STATUS: OPERATIONAL");
      print("");
      print("TYPE 'MENU' TO RETURN.");
      break;

    case "D":
      print("DIRECTORATE OF INTERNAL SURVEILLANCE AND COMMUNICATIONS CHANNEL");
      print("-----------------------------------");
      print(`
MANDATE:
Assist the Director-General and the Intelligence Head with survillance of personnel. [DATA EXPULGED]

RESPONSIBILITIES INCLUDE:
- UNKNOWN

ACCESS CONTROL:
- UNKNOWN
`);
      print("-----------------------------------");
      print("ACCESS DENIED");
      print("CLEARANCE LEVEL INSUFFICIENT");
      print("");
      print("TYPE 'MENU' TO RETURN.");
      break;
  }
}

/* =========================
   INITIAL WARNING
========================= */
print(`
************************************************************
*                  FEDERAL SECURITY NOTICE                 *
************************************************************

THIS TERMINAL IS THE PROPERTY OF A FEDERAL AUTHORITY.

UNAUTHORIZED ACCESS OR USE IS STRICTLY PROHIBITED.

ALL ACTIVITIES PERFORMED ON THIS SYSTEM ARE:
- MONITORED
- RECORDED
- SUBJECT TO REVIEW BY SECURITY OFFICERS

ACCESS IS RESTRICTED TO PERSONNEL WITH VALID CLEARANCE.

ENTER AUTHORIZATION CODE TO CONTINUE.
`);

/* =========================
   INPUT HANDLER
========================= */
document.addEventListener("keydown", e => {
  startAmbientAudio();

  // Always allow typing if no valid token yet
  if (e.key === "Enter") {
    print("> " + buffer);
    const cmd = buffer.trim().toUpperCase();

    if (!loggedIn) {
      // Manual code fallback
      if (cmd === ACCESS_CODE) {
        clearScreen();
        print("ACCESS GRANTED (MANUAL LOGIN)");
        loggedIn = true;
        terminalUnlocked = true; // allow further commands
        showMainMenu();
      } else {
        print("ACCESS DENIED");
      }
    } else {
      // Already logged in â†’ handle terminal commands
      if (cmd === "MENU") {
        clearScreen();
        showMainMenu();
      }
else if (mode === "MAIN_MENU") {
  switch (cmd) {
    case "1":
    case "3":
    case "5":
    case "6":
    case "7":
      clearScreen();
      print("ACCESSING SECTOR " + cmd + "...");
      print("");
      print("SECTOR CONTENT NOT YET INITIALIZED");
      print("");
      print("TYPE 'MENU' TO RETURN.");
      break;

    case "1":
      showFederalDisciplinaryCouncil();
      break;
      
    case "2":
      showFederationOperations();
      break;

    case "4":
      showFederalAgentInformation();
      break;

    default:
      print("UNRECOGNIZED SECTOR");
  }
}
 else if (mode === "FED_OPS" && /^[A-D]$/.test(cmd)) {
        showFedOpsSection(cmd);
      } else if (mode === "IAD_MENU" && /^[1-3]$/.test(cmd)) {
        clearScreen();
        print("REQUEST LOGGED.");
        print("");
        print("TYPE 'MENU' TO RETURN.");
      }else {
        print("UNRECOGNIZED COMMAND");
      }
    }

    buffer = "";
    input.textContent = "";
  } else if (e.key === "Backspace") {
    buffer = buffer.slice(0, -1);
    input.textContent = buffer;
  } else if (e.key.length === 1) {
    buffer += e.key.toUpperCase();
    input.textContent = buffer;
  }
});
</script>

<script>
const SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbyJDDsj4Ow8o-sbN3mPIb2sPn76ubIe-rNvKMZoEhBric-yId1yGHDQKThvXelrZag/exec";

const token = new URLSearchParams(location.search).get("token");
console.log("TOKEN:", token);

  /*
fetch(SCRIPT_URL + "?token=" + encodeURIComponent(token))
  .then(r => r.json())
  .then(res => {
    console.log("Validation result:", res); // Debug why token failed
    if (!res.ok) {
      denyAccess();
      print("REASON: " + (res.reason || "unknown"));
      return;
    }

    window.AGENT = {
      email: res.email,
      clearance: res.clearance,
      codename: res.codename
    };

    unlockTerminal();
  })
  .catch(err => {
    console.error(err);
    denyAccess();
  });
  */
</script>
</body>
</html>

